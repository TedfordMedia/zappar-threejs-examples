import{GLTFLoader}from"../jsm/loaders/GLTFLoader.js";import*as THREE from"../build/three.module.js";import{TWEEN}from"../jsm/libs/tween.module.min.js";var masterTools=function(xprefix){this.renderer,this.gloader=new GLTFLoader,this.tloader=new THREE.TextureLoader,this.logoModelFileList=[],this.objectFolder="",this.mixers=[],this.camera,this.rotators=[],this.controllers=[],this.controls,this.scene="",this.trackerGroups=[],this.campaignID="defaltdarademoorange";let xthis=this;this.guiData={usersGPS:!1,addX:"0",addY:"0",addZ:"20"},this.addAnImageTrackerAndGroup=function(){},this.loadGLTFmodel=function(modelUrl,xxscaleaa,myParams,xcallback){var material,rotateY,rotateX,xthis=this;myParams?(myParams.material&&(material=myParams.material),myParams.rotateY&&(rotateY=myParams.rotateY),myParams.rotateX&&(rotateX=myParams.rotateX)):alert("severe error ! 7765A"),console.log("work in progress:"+modelUrl);var xthis=this;myParams.addToThisObject?xthis.sceneToAddTo=myParams.addToThisObject:alert("System debugS!  addToThisObject hasnt been set "),this.gloader.load(modelUrl,(function(gltf){var cnt=0;return gltf.scene.scale.set(xxscaleaa,xxscaleaa,xxscaleaa),xthis.sceneToAddTo.add(gltf.scene),myParams.rotatorX&&xthis.rotators.push(gltf.scene),myParams.rotateX&&(gltf.scene.rotation.x=myParams.rotateX),myParams.rotateZ&&(gltf.scene.rotation.z=myParams.rotateZ),myParams.posX&&(gltf.scene.position.x=myParams.posX),myParams.posY&&(gltf.scene.position.y=myParams.posY),myParams.posZ&&(gltf.scene.position.z=myParams.posZ),rotateY&&(gltf.scene.rotation.y=rotateY),xcallback&&xcallback(gltf.scene,modelUrl),gltf.scene}),(function(xhr){console.log(modelUrl+" "+xhr.loaded/xhr.total*100+"% loaded")}),(function(error){console.log("An error happened"+error),console.dir(error)}))},this.addThisActionToMixers=function(xmesh,actnum,xgltf){var mixer=new THREE.AnimationMixer(xmesh),action=mixer.clipAction(xgltf.animations[actnum]);action.stop(),action.play(),action.setLoop(THREE.LoopOnce),xthis.mixers.push(mixer)},this.doRenderingMixersStuff=function(clock){for(var delta=clock.getDelta(),i=0;i<xthis.mixers.length;++i)xthis.mixers[i].update(delta)},this.daraLoadGLTFmodel=function(modelUrl,xxscaleaa,myParams,xcallback){var xthis,xLoaderGltf=(xthis=this).gloader,material,rotateY,rotateX,xthis=this;console.log("unfinisjhed"),xthis.gloader.load(modelUrl,(function(gltf){var model=gltf.scene,mesh=gltf.scene.children[0],s=1;mesh.scale.set(1,1,1),mesh.position.y=0,mesh.position.x=6,mesh.castShadow=!0,mesh.receiveShadow=!0;const mygroup=new THREE.Group;var mixer;mygroup.add(mesh),xthis.scene.add(mygroup),new THREE.AnimationMixer(model).clipAction(gltf.animations[0]).play()}))},this.createBasicThreeCameraUsingZappa=function(){xthis.camera=new ZapparThree.Camera,xthis.camera.lookAt(new THREE.Vector3(0,0,0))},this.setZapprCameraRenderBits=function(){ZapparThree.glContextSet(xthis.renderer.getContext()),ZapparThree.permissionRequestUI().then((function(granted){granted?xthis.camera.start():ZapparThree.permissionDeniedUI()}))},this.createSceneWithCameraImage=function(){this.scene=new THREE.Scene,this.scene.background=xthis.camera.backgroundTexture},this.decideImageTrackerFilename=function(){var n="example-tracking-image.zpt",preefix="./images/trackings/";switch(this.campaignID){case"defaltdarademoorange":console.log("default Darabase Orange Campaign is used"),n="example-tracking-image.zpt";break;case"tenetdemo":console.log("Darabase Movie-Tenet Campaign is used"),n="tenet_billboard.zpt";break;default:throw new Error("this.campaignID is out of range: "+this.campaignID)}return preefix+n},this.setupCubeMaterialArray=function(){xthis=this;var TedmaterialArray=[new THREE.MeshBasicMaterial({color:0,map:xthis.tloader.load("./images/zleft.png")}),new THREE.MeshBasicMaterial({color:0,map:xthis.tloader.load("./images/zright.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/orange.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/orange.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/znegback.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/zposfront.png")})];this.theMaterialArray=TedmaterialArray},this.theMaterialArray=[new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/zleft.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/zright.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/orange.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/orange.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/znegback.png")}),new THREE.MeshBasicMaterial({map:xthis.tloader.load("./images/zposfront.png")})],this.addSettingsIcon=function(){console.log("teds debug bits only for testing");var xthis=this,h='  \n            <div id="content" class="divForSettings"> \n                <div id="divForSettingsIcons">\n                    <img id="iconforSettings" style="cursor:pointer;z-index:9999" src="./images/icons8-settings.svg" width="40" height="40" />\n                    <img id="iconforCancel" style="cursor:pointer;z-index:9999;display:none" src="./images/icons8-cancel.svg" width="40" height="40" />\n                </div>\n            </div>   \n        ';$("#infooverlaybot").html(h);var hht='\n            <div id="settingsinner" style="display:none" >\n                <div id="settingsinnerin" >  \n                    <div class="modal-header mymodalheader" style="padding-left:0;padding-right:0">\n                        <h5 class="modal-title bigwriting">\n                            Settings\n                        </h5>\n                        <button   type="button" class="btn-close iconforCancel" data-bs-dismiss="modal" aria-label="Close"></button>\n                    </div> \n                    \x3c!-- Checked switch --\x3e\n                    <br>\n\n                    <br>\n                    <div class="form-check form-switch">\n                        <input class="form-check-input" type="checkbox" id="broadcastSwitchCheckChecked" checked />\n                        <label class="form-check-label" for="broadcastSwitchCheckChecked">\n                            testing 123!\n                        </label>\n                    </div>\n                </div>\n            </div>';$(".divForSettings").append(hht),$("#iconforSettings").on("click",(function(e){alert("TESING123: you clicked settings "),$("#iconforSettings").hide(),$("#iconforCancel").show()}))},this.basicCubeTween=function(voxel){voxel.scale.x=0,voxel.scale.y=0,voxel.scale.z=0;var duration=800,targetPosition=new THREE.Vector3(1,1,1);new TWEEN.Tween(voxel.scale).to(targetPosition).delay(1e3).duration(800).yoyo(!0).easing(TWEEN.Easing.Bounce.Out).start();var xtween=new TWEEN.Tween(voxel.position).to({z:"1"},1e3).easing(TWEEN.Easing.Bounce.Out).delay(1e3).start()},this.updateAframeHiroBoxFaces=function(){var el;let mesh;document.getElementById("hirobox").getObject3D("mesh").traverse((function(node){if(node.isMesh){console.log("mesh is updated color");let mat=new THREE.MeshStandardMaterial,color=new THREE.Color(16711680);mat.color=color,node.material=xthis.materialArray}}))},this.makeAframeMainBox=function(position){var new_latitude=position.coords.latitude,new_longitude=position.coords.longitude,scne=document.querySelector("a-scene"),box=document.createElement("a-box");box.setAttribute("color","purple"),box.setAttribute("gps-entity-place",`latitude: ${new_latitude}; longitude: ${new_longitude};`),box.setAttribute("depth","1"),box.setAttribute("height","1"),box.setAttribute("width","1"),box.setAttribute("position","0 0 3"),scne.appendChild(box)},this.setupRendererBits=function(renderer){xthis.renderer=renderer,xthis.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(xthis.renderer.domElement),xthis.renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,renderer.shadowMapType=THREE.PCFSoftShadowMap,renderer.outputEncoding=THREE.sRGBEncoding},this.ge,this.createBasicThreeRenderer=function(){this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.outputEncoding=THREE.sRGBEncoding,document.body.appendChild(this.renderer.domElement)},this.listenForWindowResize=function(){window.addEventListener("resize",()=>{xthis.renderer.setSize(window.innerWidth,window.innerHeight)})},this.giveMainCubeishModelToUse=function(){var x;return"./models/four_screens_simple_v4.glb"},this.createDirLightBasic=function(){if(!xthis.scene)return void alert("system error no scene is set 2xyz123");const directionalLight=new THREE.DirectionalLight(16777215,.5);directionalLight.position.x=0,directionalLight.position.y=0,xthis.scene.add(directionalLight)},this.addFloorStructuresAndHelpers=function(scene){xthis.scene=scene;var planeGeometry=new THREE.PlaneBufferGeometry(100,100);planeGeometry.rotateX(-Math.PI/2);var planeMaterial=new THREE.ShadowMaterial({opacity:.2}),plane=new THREE.Mesh(planeGeometry,planeMaterial);plane.receiveShadow=!0,xthis.scene.add(plane);var texture=xthis.tloader.load("./images/teddytedt.png"),geometry=new THREE.BoxBufferGeometry(10,.1,10),material=new THREE.MeshStandardMaterial({map:texture}),tedmediaCube=new THREE.Mesh(geometry,material);if(tedmediaCube.position.set(0,-.053,0),tedmediaCube.receiveShadow=!0,!xthis.scene)return void alert("system error no scene is set xyz123");xthis.scene.add(tedmediaCube);const xxgeometry=new THREE.BoxGeometry(.1,25,.1),xxmaterial=new THREE.MeshBasicMaterial({color:65280}),cube=new THREE.Mesh(xxgeometry,xxmaterial);cube.position.set(0,1,0),xthis.scene.add(cube);const axesHelper=new THREE.AxesHelper(15);scene.add(axesHelper);const gridHelper=new THREE.GridHelper(10,10);scene.add(gridHelper)},this.setupMainConnections=function(renderer,scene){this.sceneToAddTo=scene,this.scene=scene,this.renderer=renderer},this.setupMainCamera=function(camera){this.camera=camera},this.test=function(){alert("testing123")},this.showOnscreenGPSMessage=function(){$("#teddydisplay").html("GPS FOUND")}};export{masterTools};